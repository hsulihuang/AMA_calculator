<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMA Calculator</title>
</head>
<body>
    <h1>AMA Calculator</h1>
    <form action="/calculate" method="post">
        <!-- Impairment Standard -->
        <label for="impairment_standard">Impairment Standard:</label>
        <input type="text" id="impairment_standard" name="impairment_standard"><br><br>

        <!-- Category -->
        <label for="category">Category:</label>
        <select id="category" name="category">
            <option value="">Select Category</option>
            {% for category in categories %}
            <option value="{{ category }}">{{ category }}</option>
            {% endfor %}
        </select><br><br>

        <!-- Impairment Number -->
        <label for="impairment_number">Impairment Number:</label>
        <select id="impairment_number" name="impairment_number">
            <option value="">Select Impairment Number</option>
        </select><br><br>

        <!-- Occupational Group -->
        <label for="occupational_group">Occupational Group:</label>
        <input type="text" id="occupational_group" name="occupational_group"><br><br>

        <!-- Age -->
        <label for="age">Age:</label>
        <input type="text" id="age" name="age"><br><br>

        <!-- Submit Button -->
        <input type="submit" value="Calculate">
    </form>

    <script>
        // Data for dynamic dropdowns
        const impairmentData = {
            {% for category in categories %}
            "{{ category }}": [
                {% for index, row in table22.iterrows() %}
                    {% if row['Impairment Number'][:2] == category %}
                    "{{ row['Impairment Number'] }}",
                    {% endif %}
                {% endfor %}
            ],
            {% endfor %}
        };

        // Update Impairment Number dropdown based on selected Category
        document.getElementById('category').addEventListener('change', function() {
            const selectedCategory = this.value;
            const impairmentDropdown = document.getElementById('impairment_number');
            impairmentDropdown.innerHTML = '<option value="">Select Impairment Number</option>';

            if (selectedCategory in impairmentData) {
                impairmentData[selectedCategory].forEach(function(impairment) {
                    const option = document.createElement('option');
                    option.value = impairment;
                    option.text = impairment;
                    impairmentDropdown.appendChild(option);
                });
            }
        });
    </script>
</body>
</html>
